# MP Ukagaka 品質檢查與建議清單

這份清單提供在發佈或部署前可快速檢視的項目，確保外掛功能、效能與安全性表現符合預期。

## 核心功能驗證
- **角色載入**：在首頁、文章頁與自訂文章類型各開啟一次，確認角色與對話皆正常顯示。
- **對話輪播**：縮短自動輪播間隔，驗證定時切換與「停用自動說話」開關都能立即生效。
- **外部對話檔案**：同時測試 TXT 與 JSON 來源，確認換行、特殊符號與 UTF-8 編碼不會破版。
- **AI 回覆與覆寫**：於啟用 AI 替換對話時，檢查舊有靜態對話不被覆寫、timeout 會回退為靜態訊息。
- **Canvas 動畫**：準備單張與多張序列圖，檢查動畫僅在對話輸出期間播放，並確認 100ms 幀率的平滑度。

## AI 與 LLM 設定建議
- **API Key 安全**：使用後台的加密儲存機制，避免將 key 寫入版本控制；定期輪替並刪除停用的 key。
- **模型與超時**：遠端 Ollama 建議提高超時並先跑 `/api/version` 健康檢查；雲端模型則需設置機率與頻率避免過度消耗。
- **情境提示詞**：為每個角色撰寫獨立 system prompt，覆蓋語氣、禁止內容與回應長度，避免 AI 發散。
- **瀏覽器端提示**：前端輸出對話時保留 loading 與錯誤提示，讓使用者知道 AI 回應延遲的原因。

## 相容性與效能
- **環境需求**：在最低支援版本（PHP 7.4、WordPress 5.0）與最新 LTS 各測一次，確認警告與記錄檔皆乾淨。
- **快取策略**：檢查 transient/option 清理機制是否在停用或刪除外掛時執行，避免遺留多餘資料。
- **資源載入**：開啟瀏覽器網路面板，確認只在需要的頁面載入前端 JS/CSS，且檔案有壓縮或合併。
- **無障礙/國際化**：檢查 `aria` 標籤、鍵盤可操作性與多語系翻譯檔，避免硬編碼文字。

## 調試與回報
- **日誌可讀性**：啟用 `WP_DEBUG` 下，確認關鍵錯誤都有明確訊息與上下文；必要時在 `DEBUG_SLIMSTAT.md` 所述位置補充額外記錄。
- **回報流程**：記錄重現步驟、插件設定匯出與錯誤代碼；於 issue 模板中附上瀏覽器 console 與 PHP error log。

> 建議每次發佈前完整跑過本清單，並在 CI/CD 任務中自動化可機器化的檢查（例如程式碼掃描、國際化字串檢測）。
